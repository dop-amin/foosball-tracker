<div class="bracket-match active" id="match-{{ match.id }}" style="border-color: #007bff; box-shadow: 0 0 15px rgba(0,123,255,0.4);">
    <form hx-post="/api/tournaments/{{ tournament.id }}/matches/{{ match.id }}"
          hx-target="#match-{{ match.id }}"
          hx-swap="outerHTML">
        <div style="padding: 15px; background: #f8f9fa;">
            <h6 class="mb-3">Record Match Result</h6>

            {% if error %}
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                {{ error }}
            </div>
            {% endif %}

            <div class="mb-2">
                <label class="form-label small">Black Side: {{ match.player1.name }} Score</label>
                <div class="input-group input-group-sm">
                    <input type="number" class="form-control text-center" id="match-team1-score-{{ match.id }}" name="team1_score" min="0" max="11" value="0" required>
                    <button class="btn btn-outline-danger" type="button" onclick="decrementMatchScore('match-team1-score-{{ match.id }}')">−</button>
                    <button class="btn btn-outline-success" type="button" onclick="incrementMatchScore('match-team1-score-{{ match.id }}')">+</button>
                    <button class="btn btn-outline-primary" type="button" onclick="incrementMatchScoreBy('match-team1-score-{{ match.id }}', 10)">+10</button>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label small">White Side: {{ match.player2.name }} Score</label>
                <div class="input-group input-group-sm">
                    <input type="number" class="form-control text-center" id="match-team2-score-{{ match.id }}" name="team2_score" min="0" max="11" value="0" required>
                    <button class="btn btn-outline-danger" type="button" onclick="decrementMatchScore('match-team2-score-{{ match.id }}')">−</button>
                    <button class="btn btn-outline-success" type="button" onclick="incrementMatchScore('match-team2-score-{{ match.id }}')">+</button>
                    <button class="btn btn-outline-primary" type="button" onclick="incrementMatchScoreBy('match-team2-score-{{ match.id }}', 10)">+10</button>
                </div>
            </div>

            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-sm btn-primary flex-fill">Save Result</button>
                <button type="button"
                        class="btn btn-sm btn-secondary flex-fill"
                        hx-get="/api/tournaments/{{ tournament.id }}/bracket"
                        hx-target="#tournament-bracket"
                        hx-swap="innerHTML">Cancel</button>
            </div>
        </div>
    </form>
</div>

<script>
function incrementMatchScore(inputId) {
    const input = document.getElementById(inputId);
    const currentValue = parseInt(input.value) || 0;
    const maxValue = parseInt(input.max) || 11;
    if (currentValue < maxValue) {
        input.value = currentValue + 1;
    }
}

function decrementMatchScore(inputId) {
    const input = document.getElementById(inputId);
    const currentValue = parseInt(input.value) || 0;
    const minValue = parseInt(input.min) || 0;
    if (currentValue > minValue) {
        input.value = currentValue - 1;
    }
}

function incrementMatchScoreBy(inputId, amount) {
    const input = document.getElementById(inputId);
    const currentValue = parseInt(input.value) || 0;
    const maxValue = parseInt(input.max) || 11;
    const newValue = currentValue + amount;
    input.value = Math.min(newValue, maxValue);
}
</script>
